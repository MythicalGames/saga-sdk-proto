syntax = "proto3";

option java_multiple_files = true;
option java_package = "games.mythical.saga.sdk.proto.api.item";

import "common/item/definition.proto";
import "common/common.proto";
import "common/finalization.proto";
import "common/query.proto";

package saga.api.item;

/**
 * @exclude
 * ----- Item Definitions -----
 */
message ItemProto {
    string trace_id = 1;
    /* The game's unique id for this Item */
    string game_inventory_id = 2;
    /* The game's ItemType id associated to this Item */
    string game_item_type_id = 3;
    /* User for this Item */
    string oauth_id = 6;
    int32 serial_number = 8;
    /* Metadata accessible address */
    string metadata_uri = 9;
    /* Metadata for this Item */
    saga.common.Metadata metadata = 11;
    /* State that the Item is in. See ItemState for more information */
    saga.proto.common.item.ItemState item_state = 12;
    /* When was this Item created */
    int64 created_timestamp = 13;
    /* When was this Item last updated */
    int64 updated_timestamp = 14;
}

message ItemsProto {
    repeated ItemProto items = 1;
}

/**
 * @exclude
 * ----- Request and Response Definitions -----
 */

/* Issue item call */
message IssueItemRequest {
    /* GameInventory Id of Item being issued */
    string game_inventory_id = 1;
    /* User that is issuing Item */
    string oauth_id = 2;
    /* Unique id set for your game of the Item being issued */
    string game_item_type_id = 3;
    /* Metadata associated to Item being issued */
    saga.common.Metadata metadata = 4;
    string order_id = 5;
    string request_ip = 6;
}

/* Get Item call */
message GetItemRequest {
    /* Game's id for the Item to retrieve */
    string game_inventory_id = 1;
    /* Include history of the Item? */
    bool history = 2;
}

/* Get Items call */
message GetItemsRequest {
    /* Sort/filter options */
    saga.common.QueryOptionsProto query_options = 1;
    saga.common.Finalized finalized = 2;
    string token_name = 3;
}

/* Get Items for Player call */
message GetItemsForPlayerRequest {
    /* Player to get Items for */
    string oauth_id = 1;
}

/* Update Metadata call */
message UpdateItemMetadata {
    /* Update Metadata for the Item with this id */
    string game_inventory_id = 1;
    /* Metadata to update with */
    saga.common.Metadata metadata = 2;
}

/* Update Metadata on Item call */
message UpdateItemsMetadataRequest {
    repeated UpdateItemMetadata update_items = 1;
}

/* Transfer item call */
message TransferItemRequest {
    /* Game's id for the Item to transfer */
    string game_inventory_id = 1;
    /* User of Item to transfer from */
    string source_oauth_id = 2;
    /* User of Item to transfer to */
    string destination_oauth_id = 3;
    string store_id = 4;
}

/* Burn item call */
message BurnItemRequest {
    /* Game's id for the Item to burn */
    string game_inventory_id = 1;
}